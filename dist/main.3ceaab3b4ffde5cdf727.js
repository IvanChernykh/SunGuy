(()=>{"use strict";const e=["obst-1","obst-2","obst-3","obst-4"];class t{constructor(t,s){const n=document.createElement(t);return n.classList.add(s),n.classList.add(e[Math.round(Math.random()*(e.length-1))]),n}}const s=document.querySelector(".screen__main"),n=document.querySelector(".screen__controls"),c=document.querySelector(".screen__endgame"),a=[s,n,c];let r;function o(e){"controls"===e.target.dataset.type&&n.classList.remove("hide")}function i(e){"start"===e.target.dataset.type&&function(){r=!0,a.forEach((e=>{e.classList.add("hide")}));const e=document.createElement("div");e.classList.add("screen__game"),s.insertAdjacentElement("beforebegin",e),e.innerHTML='\n        <div class="game__ground"></div>\n        <div class="game__bg"></div>\n        <div class="game__character"></div>\n        <div class="game__score">\n            high: <span class="game__highscore"></span><br>\n            score: <span class="game__current"></span>\n        </div>\n    ';const n=e.querySelector(".game__character");let o=+.8.toFixed(2),i=0,d=0;function l(){n.classList.contains("jump")||(n.classList.add("jump"),setTimeout((()=>{n.classList.remove("jump")}),500))}document.addEventListener("keydown",(e=>{"Space"===e.code&&l()})),e.addEventListener("click",l),function s(){if(r){i++,i%10==0&&(o=+(1.05*o).toFixed(2));let a=105;const l=new t("div","obstacle");e.insertAdjacentElement("beforeend",l);const m=setInterval((()=>{r||clearInterval(m),l.style.left=`${(a-=o).toFixed(2)}%`,a<-5&&l.remove(),function(t){parseInt(window.getComputedStyle(n).bottom)<=110&&t<=25&&t>=20&&(r=!1,e.remove(),c.querySelector(".endGame__score").innerText=`score: ${d}`,c.classList.remove("hide"))}(a)}),10),u=(500,2e3,Math.floor(1500*Math.random()+500));setTimeout((()=>{s()}),u)}}(),function(){if(r){const t=e.querySelector(".game__ground");let s=0;t.style.left=0;const n=setInterval((()=>{r||clearInterval(n),t.style.left=`${(s-=o).toFixed(2)}%`,s<=-105&&(s=0)}),10)}}(),function(){const t=e.querySelector(".game__highscore"),s=e.querySelector(".game__current");let n=localStorage.getItem("HighScore")||0;const c=setInterval((()=>{d+=1,s.innerText=d,t.innerText=n,d>n&&(n=d),r||(clearInterval(c),localStorage.setItem("HighScore",n))}),100)}()}()}n.classList.add("hide"),c.classList.add("hide"),s.addEventListener("click",(e=>{o(e),i(e)})),c.addEventListener("click",(e=>{o(e),i(e),"menu"===e.target.dataset.type&&(location.href=location.href)})),n.addEventListener("click",(e=>{"back"===e.target.dataset.type&&n.classList.add("hide")}))})();