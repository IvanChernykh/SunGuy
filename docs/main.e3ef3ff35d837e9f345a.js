(()=>{"use strict";const e=["obst-1","obst-2","obst-3","obst-4"];class t{constructor(t,n){const s=document.createElement(t);return s.classList.add(n),s.classList.add(e[Math.round(Math.random()*(e.length-1))]),s}}const n=document.querySelector(".screen__main"),s=document.querySelector(".screen__controls"),c=document.querySelector(".screen__endgame"),a=[n,s,c];let o;function r(e){"controls"===e.target.dataset.type&&s.classList.remove("hide")}function i(e){"start"===e.target.dataset.type&&function(){o=!0,a.forEach((e=>{e.classList.add("hide")}));const e=document.createElement("div");e.classList.add("screen__game"),n.insertAdjacentElement("beforebegin",e),e.innerHTML='\n        <div class="game__ground"></div>\n        <div class="game__bg"></div>\n        <div class="game__character"></div>\n        <div class="game__score">\n            high: <span class="game__highscore"></span><br>\n            score: <span class="game__current"></span>\n        </div>\n    ';const s=e.querySelector(".game__character");let r=+.8.toFixed(2),i=0,d=0;function l(){s.classList.contains("jump")||(s.classList.add("jump"),setTimeout((()=>{s.classList.remove("jump")}),500))}e.clientWidth>=900&&(r=+.6.toFixed(2)),e.clientWidth>=1100&&(r=+.5.toFixed(2)),document.addEventListener("keydown",(e=>{"Space"===e.code&&l()})),e.addEventListener("click",l),function n(){if(o){i++,i%10==0&&(r=+(1.05*r).toFixed(2));let a=105;const l=new t("div","obstacle");e.insertAdjacentElement("beforeend",l);const m=setInterval((()=>{o||clearInterval(m),l.style.left=`${(a-=r).toFixed(2)}%`,a<-5&&l.remove(),function(t){parseInt(window.getComputedStyle(s).bottom)<=110&&t<=25&&t>=20&&(o=!1,e.remove(),c.querySelector(".endGame__score").innerText=`score: ${d}`,c.classList.remove("hide"))}(a)}),10),u=(500,2e3,Math.floor(1500*Math.random()+500));setTimeout((()=>{n()}),u)}}(),function(){if(o){const t=e.querySelector(".game__ground");let n=0;t.style.left=0;const s=setInterval((()=>{o||clearInterval(s),t.style.left=`${(n-=r).toFixed(2)}%`,n<=-105&&(n=0)}),10)}}(),function(){const t=e.querySelector(".game__highscore"),n=e.querySelector(".game__current");let s=localStorage.getItem("HighScore")||0;const c=setInterval((()=>{d+=1,n.innerText=d,t.innerText=s,d>s&&(s=d),o||(clearInterval(c),localStorage.setItem("HighScore",s))}),100)}()}()}s.classList.add("hide"),c.classList.add("hide"),n.addEventListener("click",(e=>{r(e),i(e)})),c.addEventListener("click",(e=>{r(e),i(e),"menu"===e.target.dataset.type&&(location.href=location.href)})),s.addEventListener("click",(e=>{"back"===e.target.dataset.type&&s.classList.add("hide")}))})();